<?xml version="1.0" encoding="utf-8" ?>
<odoo>
  <!--  form-->
  <record id="kkj_view_form" model="ir.ui.view">
    <field name="name">KKJ Form</field>
    <field name="model">kartu.keluarga.jemaat</field>
    <field name="arch" type="xml">
      <form>
        <header>
          <button name="action_confirm" string="Confirm" type="object" attrs="{'invisible': [('state','!=','draft')]}"/>
          <button name="action_reset_to_draft" class="btn btn-secondary" string="Reset to draft" type="object" attrs="{'invisible': [('state','=','draft')]}"/>
          <field name="state" widget="statusbar"/>
        </header>
        <sheet>
          <field name="image_1920" widget="image" class="oe_avatar"/>
          <div class="oe_title">
              <label for="nomor"/>
              <h1>
                  <field name="nomor"/>
              </h1>
          </div>
          <group>
            <group string="Informasi KKJ">
              <field name="nama_jemaat_id" default_focus="1"/>
              <field name="gereja_id" options="{'no_create': True, 'no_create_edit':True}"/>
              <field name="cool_id" options="{'no_create': True, 'no_create_edit':True}"/>
            </group>
            <group string="Dalam keadaan darurat hubungi: (wajib diisi)">
              <field name="nama_darurat"/>
              <field name="alamat_darurat"/>
              <field name="telpon_darurat"/>
            </group>
          </group>
          <notebook>
            <page string="Data Keluarga" name="kkj_detail_lines">
                <field name="kkj_detail_line" context="{'form_view_ref': 'custom_addons.kkj_line_view_form', 'tree_view_ref': 'custom_addons.kkj_line_view_tree'}"/>
            </page>
          </notebook>
        </sheet>
        <div class="oe_chatter">
            <field name="message_follower_ids"/>
            <field name="activity_ids"/>
            <field name="message_ids"/>
        </div>
      </form>
    </field>
  </record>

  <!--  tree-->
  <record id="kkj_view_tree" model="ir.ui.view">
    <field name="name">KKJ List</field>
    <field name="model">kartu.keluarga.jemaat</field>
    <field name="arch" type="xml">
      <tree>
        <field name="nomor"/>
        <field name="nama_jemaat_id"/>
        <field name="gereja_id"/>
        <field name="cool_id"/>
        <field name="nama_darurat"/>
        <field name="alamat_darurat"/>
        <field name="state" string="Status" widget="badge" decoration-success="state == 'confirm'" decoration-info="state == 'draft'"/>
      </tree>
    </field>
  </record>

  <!--  search-->
  <record id="kkj_view_search" model="ir.ui.view">
    <field name="name">KKJ Search</field>
    <field name="model">kartu.keluarga.jemaat</field>
    <field name="arch" type="xml">
      <search>
        <field name="nomor"/>
        <field name="nama_jemaat_id"/>
        <field name="gereja_id"/>
        <field name="cool_id"/>
        <field name="nama_darurat"/>
        <field name="alamat_darurat"/>
      </search>
    </field>
  </record>
</odoo>